<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Varas ahí">
<meta name="viewport" content="width=device-width">
<title>Mi Sitio | Mi Sitio</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (es)" href="../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="rss.xml">
<link rel="canonical" href="http://rngkll.github.io/en/index.html">
<link rel="next" href="index-1.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body class="home blog">
    <div id="wrap" style="width:850px">
        <div id="container" style="width:560px">
            
            
        <div class="postbox">
        <h1><a href="posts/holamundo-ethereum.html">HolaMundo con ethereum</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Posted: <time class="published" datetime="2017-07-18T23:00:00-06:00">2017-07-18 23:00</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/ethereum.html"><span>ethereum</span></a>
                            <a class="tag" href="categories/jaquerespeis.html"><span>jaquerespeis</span></a>
                            <a class="tag" href="categories/smart-contracts.html"><span>smart contracts</span></a>
                </span>
            </div>
        <div>
<h2>Lista de herramientas</h2>
<ul>
<li>testRPC</li>
<li>nvm</li>
<li>web3</li>
<li>geth</li>
<li>solc</li>
<li>web3</li>
</ul>
<h2>Instalación</h2>
<h3>Linux</h3>
<p>Los siguientes pasos muestras como instalar las herramientas necesarias en Ubuntu 17.04</p>
<pre class="code literal-block"><span></span>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.2/install.sh | bash
nvm ls-remote
nvm install &lt;la ultima LTS&gt;
npm install -g ethereumjs-testrpc
npm install solc
npm install web3
</pre>


<h3>Mac</h3>
<p>Para instalar nvm es necesario tener <a href="https://brew.sh/">brew</a></p>
<pre class="code literal-block"><span></span>brew install nvm
nvm ls-remote
nvm install &lt;la ultima LTS&gt;
npm install -g ethereumjs-testrpc
npm install solc
npm install web3
</pre>


<h2>Desarrollo</h2>
<p>Con el editor preferido, escribir el contrato, para esto se va a utilizar el lenguage <a href="https://solidity.readthedocs.io/en/develop/"><strong>solidity</strong></a>, sin embargo existen otras opciones como <a href="https://github.com/ethereum/wiki/wiki/Serpent"><strong>serpent</strong></a>.</p>
<p>Para compilar el contrato vamos a utilizar el comando <code>solc --bin --optimize &lt;archivo.sol&gt;</code></p>
<p>Escribit el siguiente contrato en un archivo llamado Voting.sol</p>
<pre class="code literal-block"><span></span>pragma solidity ^0.4.11;
// We have to specify what version of compiler this code will compile with

contract Voting {
  /* mapping field below is equivalent to an associative array or hash.
  The key of the mapping is candidate name stored as type bytes32 and value is
  an unsigned integer to store the vote count
  */

  mapping (bytes32 =&gt; uint8) public votesReceived;

  /* Solidity doesn't let you pass in an array of strings in the constructor (yet).
  We will use an array of bytes32 instead to store the list of candidates
  */

  bytes32[] public candidateList;

  /* This is the constructor which will be called once when you
  deploy the contract to the blockchain. When we deploy the contract,
  we will pass an array of candidates who will be contesting in the election
  */
  function Voting(bytes32[] candidateNames) {
    candidateList = candidateNames;
  }

  // This function returns the total votes a candidate has received so far
  function totalVotesFor(bytes32 candidate) returns (uint8) {
    if (validCandidate(candidate) == false) throw;
    return votesReceived[candidate];
  }

  // This function increments the vote count for the specified candidate. This
  // is equivalent to casting a vote
  function voteForCandidate(bytes32 candidate) {
    if (validCandidate(candidate) == false) throw;
    votesReceived[candidate] += 1;
  }

  function validCandidate(bytes32 candidate) returns (bool) {
    for(uint i = 0; i &lt; candidateList.length; i++) {
      if (candidateList[i] == candidate) {
        return true;
      }
    }
    return false;
  }
}
</pre>


<h3>Pasos para desplegar el contrato</h3>
<p><em>Ejecutar node</em></p>
<p>Mientras se ejecutan los comandos, se puede ver su salida y analizarla.</p>
<pre class="code literal-block"><span></span><span class="nx">Web3</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'web3'</span><span class="p">)</span>
<span class="nx">web3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Web3</span><span class="p">(</span><span class="k">new</span> <span class="nx">Web3</span><span class="p">.</span><span class="nx">providers</span><span class="p">.</span><span class="nx">HttpProvider</span><span class="p">(</span><span class="s2">"http://localhost:8545"</span><span class="p">));</span>
</pre>


<p>Listar las cuentas existentes en la red</p>
<pre class="code literal-block"><span></span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span>
</pre>


<p>Compilar el código </p>
<pre class="code literal-block"><span></span><span class="nx">code</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">'Voting.sol'</span><span class="p">).</span><span class="nx">toString</span><span class="p">()</span>
<span class="nx">solc</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'solc'</span><span class="p">)</span>
<span class="nx">compiledCode</span> <span class="o">=</span> <span class="nx">solc</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span><span class="nx">abiDefinition</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">compiledCode</span><span class="p">.</span><span class="nx">contracts</span><span class="p">[</span><span class="s1">':Voting'</span><span class="p">].</span><span class="kr">interface</span><span class="p">)</span>
<span class="nx">VotingContract</span> <span class="o">=</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">contract</span><span class="p">(</span><span class="nx">abiDefinition</span><span class="p">)</span>
<span class="nx">byteCode</span> <span class="o">=</span> <span class="nx">compiledCode</span><span class="p">.</span><span class="nx">contracts</span><span class="p">[</span><span class="s1">':Voting'</span><span class="p">].</span><span class="nx">bytecode</span>
<span class="nx">deployedContract</span> <span class="o">=</span> <span class="nx">VotingContract</span><span class="p">.</span><span class="k">new</span><span class="p">([</span><span class="s1">'Rama'</span><span class="p">,</span><span class="s1">'Nick'</span><span class="p">,</span><span class="s1">'Jose'</span><span class="p">],{</span><span class="nx">data</span><span class="o">:</span> <span class="nx">byteCode</span><span class="p">,</span> <span class="nx">from</span><span class="o">:</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">gas</span><span class="o">:</span> <span class="mi">4700000</span><span class="p">})</span>
<span class="nx">deployedContract</span><span class="p">.</span><span class="nx">address</span>
<span class="nx">contractInstance</span> <span class="o">=</span> <span class="nx">VotingContract</span><span class="p">.</span><span class="nx">at</span><span class="p">(</span><span class="nx">deployedContract</span><span class="p">.</span><span class="nx">address</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span><span class="o">&gt;</span> <span class="nx">contractInstance</span><span class="p">.</span><span class="nx">totalVotesFor</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">'Rama'</span><span class="p">)</span>

<span class="p">{</span> <span class="p">[</span><span class="nb">String</span><span class="o">:</span> <span class="s1">'0'</span><span class="p">]</span> <span class="nx">s</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">e</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">c</span><span class="o">:</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">contractInstance</span><span class="p">.</span><span class="nx">voteForCandidate</span><span class="p">(</span><span class="s1">'Rama'</span><span class="p">,</span> <span class="p">{</span><span class="nx">from</span><span class="o">:</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>

<span class="s1">'0xdedc7ae544c3dde74ab5a0b07422c5a51b5240603d31074f5b75c0ebc786bf53'</span>

<span class="o">&gt;</span> <span class="nx">contractInstance</span><span class="p">.</span><span class="nx">voteForCandidate</span><span class="p">(</span><span class="s1">'Rama'</span><span class="p">,</span> <span class="p">{</span><span class="nx">from</span><span class="o">:</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>

<span class="s1">'0x02c054d238038d68b65d55770fabfca592a5cf6590229ab91bbe7cd72da46de9'</span>

<span class="o">&gt;</span> <span class="nx">contractInstance</span><span class="p">.</span><span class="nx">voteForCandidate</span><span class="p">(</span><span class="s1">'Rama'</span><span class="p">,</span> <span class="p">{</span><span class="nx">from</span><span class="o">:</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>

<span class="s1">'0x3da069a09577514f2baaa11bc3015a16edf26aad28dffbcd126bde2e71f2b76f'</span>

<span class="o">&gt;</span> <span class="nx">contractInstance</span><span class="p">.</span><span class="nx">totalVotesFor</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">'Rama'</span><span class="p">).</span><span class="nx">toLocaleString</span><span class="p">()</span>

<span class="s1">'3'</span>
</pre>


<h2>Opcodes de la EVM</h2>
<h3>0s: Stop and Arithmetic Operations</h3>
<pre class="code literal-block"><span></span>0x00    STOP        Halts execution
0x01    ADD         Addition operation
0x02    MUL         Multiplication operation
0x03    SUB         Subtraction operation
0x04    DIV         Integer division operation
0x05    SDIV        Signed integer
0x06    MOD         Modulo
0x07    SMOD        Signed modulo
0x08    ADDMOD      Modulo
0x09    MULMOD      Modulo
0x0a    EXP         Exponential operation
0x0b    SIGNEXTEND  Extend length of two's complement signed integer
</pre>


<h3>10s: Comparison &amp; Bitwise Logic Operations</h3>
<pre class="code literal-block"><span></span>0x10    LT      Lesser-than comparison
0x11    GT      Greater-than comparison
0x12    SLT     Signed less-than comparison
0x13    SGT     Signed greater-than comparison
0x14    EQ      Equality  comparison
0x15    ISZERO  Simple not operator
0x16    AND     Bitwise AND operation
0x17    OR      Bitwise OR operation
0x18    XOR     Bitwise XOR operation
0x19    NOT     Bitwise NOT operation
0x1a    BYTE    Retrieve single byte from word
</pre>


<h3>20s: SHA3</h3>
<pre class="code literal-block"><span></span>0x20    SHA3    Compute Keccak-256 hash
</pre>


<h3>30s: Environmental Information</h3>
<pre class="code literal-block"><span></span>0x30    ADDRESS         Get address of currently executing account
0x31    BALANCE         Get balance of the given account
0x32    ORIGIN          Get execution origination address
0x33    CALLER          Get caller address. This is the address of the account that is directly responsible for this execution
0x34    CALLVALUE       Get deposited value by the instruction/transaction responsible for this execution
0x35    CALLDATALOAD    Get input data of current environment
0x36    CALLDATASIZE    Get size of input data in current environment
0x37    CALLDATACOPY    Copy input data in current environment to memory This pertains to the input data passed with the message call instruction or transaction
0x38    CODESIZE        Get size of code running in current environment
0x39    CODECOPY        Copy code running in current environment to memory
0x3a    GASPRICE        Get price of gas in current environment
0x3b    EXTCODESIZE     Get size of an account's code
0x3c    EXTCODECOPY     Copy an account's code to memory
</pre>


<h3>40s: Block Information</h3>
<pre class="code literal-block"><span></span>0x40    BLOCKHASH   Get the hash of one of the 256 most recent complete blocks
0x41    COINBASE    Get the block's beneficiary address
0x42    TIMESTAMP   Get the block's timestamp
0x43    NUMBER      Get the block's number
0x44    DIFFICULTY  Get the block's difficulty
0x45    GASLIMIT    Get the block's gas limit
</pre>


<h3>50s Stack, Memory, Storage and Flow Operations</h3>
<pre class="code literal-block"><span></span>0x50    POP         Remove item from stack
0x51    MLOAD       Load word from memory
0x52    MSTORE      Save word to memory
0x53    MSTORE8     Save byte to memory
0x54    SLOAD       Load word from storage
0x55    SSTORE      Save word to storage
0x56    JUMP        Alter the program counter
0x57    JUMPI       Conditionally alter the program counter
0x58    PC          Get the value of the program counter prior to the increment
0x59    MSIZE       Get the size of active memory in bytes
0x5a    GAS         Get the amount of available gas, including the corresponding reduction
0x5b    JUMPDEST    Mark a valid destination for jumps
</pre>


<h3>60s &amp; 70s: Push Operations</h3>
<pre class="code literal-block"><span></span>0x60    PUSH1   Place 1 byte item on stack
0x61    PUSH2   Place 2-byte item on stack
…
0x7f    PUSH32  Place 32-byte (full word) item on stack
</pre>


<h3>80s: Duplication Operations</h3>
<pre class="code literal-block"><span></span>0x80    DUP1    Duplicate 1st stack item
0x81    DUP2    Duplicate 2nd stack item
…
0x8f    DUP16   Duplicate 16th stack item
</pre>


<h3>90s: Exchange Operations</h3>
<pre class="code literal-block"><span></span>0x90    SWAP1   Exchange 1st and 2nd stack items
0x91    SWAP2   Exchange 1st and 3rd stack items
…   …
0x9f    SWAP16  Exchange 1st and 17th stack items
</pre>


<h3>a0s: Logging Operations</h3>
<pre class="code literal-block"><span></span>0xa0    LOG0    Append log record with no topics
0xa1    LOG1    Append log record with one topic
…   …
0xa4    LOG4    Append log record with four topics
</pre>


<h3>f0s: System operations</h3>
<pre class="code literal-block"><span></span>0xf0    CREATE          Create a new account with associated code
0xf1    CALL            Message-call into an account
0xf2    CALLCODE        Message-call into this account with alternative account's code
0xf3    RETURN          Halt execution returning output data
0xf4    DELEGATECALL    Message-call into this account with an alternative account's code, but persisting the current values for `sender` and `value`
</pre>


<h3>Halt Execution, Mark for deletion</h3>
<pre class="code literal-block"><span></span>0xff    SELFDESTRUCT    Halt execution and register account for later deletion
</pre>


<h2>Referencias</h2>
<ul>
<li>https://github.com/creationix/nvm</li>
<li>https://github.com/ethereumjs/testrpc</li>
<li>https://en.wikipedia.org/wiki/Remote_procedure_call</li>
<li>http://ethdocs.org/en/latest/network/test-networks.html</li>
<li>https://medium.com/@doart3/ethereum-dapps-without-truffle-compile-deploy-use-it-e6daeefcf919</li>
<li>https://medium.com/@mvmurthy/full-stack-hello-world-voting-ethereum-dapp-tutorial-part-1-40d2d0d807c2</li>
<li>https://github.com/ethereum/yellowpaper</li>
</ul>
<h2>Notas</h2>
<p>testrpc -n5</p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/minar-ethereum.html">Minar ethereum</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Posted: <time class="published" datetime="2017-03-30T12:00:00-06:00">2017-03-30 12:00</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/cryptomoneda.html"><span>cryptomoneda</span></a>
                            <a class="tag" href="categories/ethereum.html"><span>ethereum</span></a>
                            <a class="tag" href="categories/jaquerespeis.html"><span>jaquerespeis</span></a>
                            <a class="tag" href="categories/minar.html"><span>minar</span></a>
                </span>
            </div>
        <div>
<h2>Requerimientos</h2>
<ul>
<li>Minador</li>
<li>Ubuntu Server 16.04</li>
<li>Opcional(tarjeta de video)</li>
<li>Python y python-twisted</li>
<li>Ethereum</li>
<li>cpp-ethereum</li>
</ul>
<p><em><strong>NOTA:</strong> Se considera Ubuntu Server, en caso de Ubuntu Desktop algunos requerimientos ya vienen instalados en el sistema.</em></p>
<h2>Instalación</h2>
<ol>
<li>
<p>Instalar ubuntu 16.04</p>
</li>
<li>
<p>Instalar python y python-wisted</p>
</li>
</ol>
<pre class="code literal-block"><span></span>sudo apt-get install python
sudo apt-get install python-twisted
</pre>


<ol>
<li>Un vez que se tiene instalado el sistema operativo, activar el ppa de ethereum</li>
</ol>
<pre class="code literal-block"><span></span>sudo add-apt-repository ppa:ethereum/ethereum
sudo add-apt-repository ppa:ethereum/ethereum-qt
sudo add-apt-repository ppa:ethereum/ethereum-dev
sudo apt-get update
</pre>


<ol>
<li>Instalar ethereum</li>
</ol>
<pre class="code literal-block"><span></span>sudo apt-get install ethereum
</pre>


<ol>
<li>Instalar cpp-ethereum</li>
</ol>
<pre class="code literal-block"><span></span>sudo apt-get install cpp-ethereum
</pre>


<ol>
<li>
<p>Clonar el repositorio de <a href="https://github.com/Atrides/eth-proxy">eth-proxy</a>.</p>
</li>
<li>
<p>Crear un wallet con <a href="https://github.com/ethereum/go-ethereum/wiki/geth">geth</a> o <a href="https://github.com/paritytech/parity">parity</a>.</p>
</li>
<li>
<p>Instalar los drivers de vídeo, en el caso de usar una tarjeta de vídeo.</p>
</li>
<li>
<p>Modificar el archivo de configuración de eth-proxy para usar el wallet.</p>
</li>
<li>
<p>En el directorio eth-proxy, ejecutar <code>eth-proxy.py</code></p>
</li>
</ol>
<pre class="code literal-block"><span></span>sudo python eth-proxy/eth-proxy.py
</pre>


<ol>
<li>Ejecutar <code>ethminer</code> apuntando a localhost</li>
</ol>
<pre class="code literal-block"><span></span>ethminer -F http://127.0.0.1:8080/minador -G
</pre>


<p><em><strong>NOTA:</strong> La opción <code>-G</code> indica a ethminer que utilice GPU para minar, en caso de no contar con GPU utilice <code>--allow-opencl-cpu</code>.</em></p>
<h2>Referencias</h2>
<p>https://github.com/paritytech/parity
https://github.com/Atrides/eth-proxy
https://launchpad.net/~ethereum/+archive/ubuntu/ethereum
http://ethdocs.org/en/latest/ethereum-clients/cpp-ethereum/installing-binaries/linux-ubuntu-ppa.html</p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/el-mejor-jerk-chicken.html">Jerk chicken natural</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Posted: <time class="published" datetime="2016-01-01T00:00:00-06:00">2016-01-01 00:00</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/allspice.html"><span>allspice</span></a>
                            <a class="tag" href="categories/comida.html"><span>comida</span></a>
                            <a class="tag" href="categories/jerk.html"><span>jerk</span></a>
                </span>
            </div>
        <div>
<h2>La idea</h2>
<p>Hace unos días estábamos de vacaciones en pavones y Coco(administradora de la casa rentada) nos llevo unas hojas de Allspice, de una se me ocurrió que podíamos hacer Jerk Chicken, resulta que la hoja tiene muy buen sabor pero no se conserva bien, por lo que no se vende comercialmente.</p>
<h2>Ingredientes</h2>
<ul>
<li>Hojas de <a href="https://en.wikipedia.org/wiki/Allspice">allspice</a>
</li>
<li><a href="https://en.wikipedia.org/wiki/Ginger">Jengibre</a></li>
<li>Salsa de soya</li>
<li>Cebolla</li>
<li>Ajo</li>
<li>Chile panameño o algun otro</li>
<li>Azucar</li>
<li>Sal</li>
<li>Aceite</li>
<li>Jugo de limón</li>
</ul>
<h2>Preparación</h2>
<p>Las proporciones dependen de la cantidad y que tan fuerte se quiera, no me gusta hacerlo con medida pero voy a escribir unas instrucciones de mas o menos como lo hice.</p>
<p>En una licuadora agregué(cantidades aproximadas):</p>
<ol>
<li>Allspice, 6 hojas.</li>
<li>Como 2 centimetros cubicos de jengibre.</li>
<li>Una botella de salsa de soya, aprox 100ml.</li>
<li>Unas 2 cebollas medianas.</li>
<li>media cabeza de ajo.</li>
<li>Un chile</li>
<li>Mas o menos, 5 cucharadas de azucar.</li>
<li>Al gusto, creo que fueron 2 cucharaditas de sal.</li>
<li>Aceite aproximadamente 150ml.</li>
<li>El jugo de 4 limones. </li>
</ol>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/programar%20microcontrolador%20stm322.html">Como programar un microcontrolador stm32 con cpp</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Posted: <time class="published" datetime="2015-12-27T23:00:00-06:00">2015-12-27 23:00</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/arm.html"><span>arm</span></a>
                            <a class="tag" href="categories/cpp.html"><span>cpp</span></a>
                            <a class="tag" href="categories/jaquerespeis.html"><span>jaquerespeis</span></a>
                            <a class="tag" href="categories/stm32.html"><span>stm32</span></a>
                </span>
            </div>
        <div>
<h2>Que se necesita</h2>
<ul>
<li>Microcontrolador STM322</li>
<li>GDB o un debugger, editor de texto o IDE</li>
<li>Una maquina con Linux</li>
</ul>
<h2>Requerimientos con Gnu/Linux</h2>
<ul>
<li>arm-none-eabi-gcc – The GNU Compiler Collection – cross compilador para ARM EABI (directo en el procesador)</li>
<li>arm-none-eabi-gdb – The GNU Debugger for the ARM EABI (bare-metal) target</li>
<li>arm-none-eabi-binutils – A set of programs to assemble and manipulate binary and object files for the ARM EABI (bare-metal) target</li>
<li>openocd – Debugging, in-system programming and boundary-scan testing for embedded target devices</li>
<li>vim – Editor de texto</li>
</ul>
<h2>Terminos importantes</h2>
<p>CMSIS = Cortex Microcontroller Software Interface Standard <a href="http://www.arm.com/products/processors/cortex-m/cortex-microcontroller-software-interface-standard.php">info</a></p>
<h2>Referencias</h2>
<p>http://regalis.com.pl/en/arm-cortex-stm32-gnulinux/</p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/lugares-de-comida-que-me-gustan.html">Lugares de comida que me gustan</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Posted: <time class="published" datetime="2015-10-07T21:56:28-06:00">2015-10-07 21:56</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/comida.html"><span>comida</span></a>
                            <a class="tag" href="categories/restaurantes.html"><span>restaurantes</span></a>
                </span>
            </div>
        <div>
<p>Estos son algunos de los lugares que mas me gusta vistar para comer.</p>
<h2>Lista</h2>
<ul>
<li>
<strong>Ruca che:</strong> En moravia, exelente restaurante de carnes.</li>
<li>
<strong>Manos en la masa:</strong> Increible brunch en barrio escalante, afuera de Casa Batsu.</li>
<li>
<strong>Go-fish:</strong> Pinares, especialidad en mariscos pero todo es muy bueno.</li>
<li>
<strong>Rincon picante:</strong> 150 este, soda tapia la sabana, la sopa en la que uno cocina el resto de ingredientes.</li>
<li>
<strong>La asociación china:</strong> San José, comida china, conocido tambien como la casa china.</li>
<li>
<strong>Maxi's by Ricky:</strong> </li>
<li>
<strong>Patty factory:</strong> Cuando quiero una sopa de mondongo y no estoy en Limón, este es el lugar.</li>
<li>
<strong>Soda guiligan:</strong> </li>
<li>
<strong>Diagonal a la alizan francesa:</strong> </li>
<li>
<strong>Soda tala:</strong> El talapindo como tiene que ser, es el mejor desayuno que uno puede probar. <a href="https://www.facebook.com/Soda-Tala-201049860065851/timeline/">facebook</a>
</li>
<li>
<strong>Chicharronera hermanos Level:</strong> </li>
</ul>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/utilizar-nikola.html">Utilizar Nikola por primera vez</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Posted: <time class="published" datetime="2015-08-20T23:00:00-06:00">2015-08-20 23:00</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/blog.html"><span>blog</span></a>
                            <a class="tag" href="categories/jaquerespeis.html"><span>jaquerespeis</span></a>
                            <a class="tag" href="categories/markdown.html"><span>markdown</span></a>
                            <a class="tag" href="categories/nikola.html"><span>nikola</span></a>
                            <a class="tag" href="categories/python.html"><span>python</span></a>
                </span>
            </div>
        <div>
<h2>Instalación</h2>
<p>La forma mas simple de instalar Nikola es con pip y virtual, también se podría utilizar uno de los paquetes de la distribución que se este utilizando, en si son usuarios de Linux.</p>
<p>En el directorio del repositorio del sitio</p>
<pre class="code literal-block"><span></span>virtualenv --python=python3 .env
source .env/bin/activate
pip3 install --upgrade "Nikola[extras]"
</pre>


<h3>Primeros usos</h3>
<p>En este momento se tiene el sistema instalado, ahora hay que crear el contenido del primer sitio de prueba, estando en el directorio que va a mantener el código, se ejecuta el comando <code>nikola init --demo .</code>, luego se debe de construir el sitio con el comando <code>nikola build</code>.</p>
<p>El siguiente paso es ver el sitio, para lo que va a utilizar el comando <code>nikola serve -b</code>, pero es mucho mas fácil utilizar <code>nikola auto -b</code> para reconstrucciones automáticas.</p>
<h2>Utilizar markdown</h2>
<p>Para utilizar markdown para crear los post se debe usar uno de los múltiples lenguajes de marcado ligero soportado, para eso se debe de editar el archivo config.py en la raíz del sitio en Nikola.</p>
<p>Primero se debe de verificar que este en la estructura <strong>COMPILERS</strong></p>
<pre class="code literal-block"><span></span># 'rest' is reStructuredText
# 'markdown' is MarkDown
# 'html' assumes the file is HTML and just copies it
COMPILERS = {
    "rest": ('.rst', '.txt'),
    "markdown": ('.md', '.mdown', '.markdown'),
    "textile": ('.textile',),
    "txt2tags": ('.t2t',),
    "bbcode": ('.bb',),
    #"wiki": ('.wiki',),
    "ipynb": ('.ipynb',),
    "html": ('.html', '.htm'),
    # PHP files are rendered the usual way (i.e. with the full templates).
    # The resulting files have .php extensions, making it possible to run
    # them without reconfiguring your server to recognize them.
    "php": ('.php',),
    # Pandoc detects the input from the source filename
    # but is disabled by default as it would conflict
    # with many of the others.
    # "pandoc": ('.rst', '.md', '.txt'),
}
</pre>


<p>Luego se debe de agregar a la estructura del tipo de entrada, en el ejemplo de abajo se agregó la linea, <code>("posts/*.md", "posts", "post.tmpl")</code> a los dos tipos de entras <strong>POST</strong> y <strong>PAGES</strong>.</p>
<pre class="code literal-block"><span></span><span class="n">POSTS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s2">"posts/*.rst"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"posts/*.txt"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"posts/*.md"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">PAGES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s2">"stories/*.rst"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.txt"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.md"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
<span class="p">)</span>
</pre>


<h2>Utilizar locales para Costa Rica</h2>
<p>Este proceso debería funcionar para la mayoría de idiomas.</p>
<ol>
<li>Generar el locale necesario con `locale-get <locale></locale>
</li>
<li>Definir cual es el locale que debe de utilizar Nikola por defecto.</li>
</ol>
<pre class="code literal-block"><span></span><span class="c1"># What is the default language?</span>
<span class="n">DEFAULT_LANG</span> <span class="o">=</span> <span class="s2">"es"</span>

<span class="c1"># What other languages do you have?</span>
<span class="c1"># The format is {"translationcode" : "path/to/translation" }</span>
<span class="c1"># the path will be used as a prefix for the generated pages location</span>
<span class="n">TRANSLATIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">DEFAULT_LANG</span><span class="p">:</span> <span class="s2">"es_CR"</span><span class="p">,</span>
    <span class="c1"># Example for another language:</span>
    <span class="c1"># "es": "./es",</span>
    <span class="s2">"es"</span><span class="p">:</span> <span class="s2">"./"</span><span class="p">,</span>
    <span class="s2">"en"</span><span class="p">:</span> <span class="s2">"./en"</span><span class="p">,</span>
<span class="p">}</span>
</pre>


<ol>
<li>Definir el locale que se va a utilizar para <code>es</code>, por defecto es <code>es_ES</code>.</li>
</ol>
<pre class="code literal-block"><span></span><span class="n">LOCALES</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"es"</span><span class="p">:</span><span class="s2">"es_CR.utf-8"</span><span class="p">,</span>
        <span class="p">}</span>
</pre>


<p>El locale a utilizar puede ser probado, importando locale <code>import locale</code> y llamando al locale necesario <code>locale.setlocale(locale.LC_ALL, 'es_CR.utf-8')</code></p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/configuracion-para-la-printrbot-simple.html">Configuración para la printrbot simple</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Posted: <time class="published" datetime="2015-08-14T21:39:41-06:00">2015-08-14 21:39</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/3dprint.html"><span>3dprint</span></a>
                            <a class="tag" href="categories/printrbot.html"><span>printrbot</span></a>
                </span>
            </div>
        <div>
<h3>Código:</h3>
<pre class="code literal-block"><span></span>M104 S{TEMP0} ; set temperature
G21 ;metric values
G90 ;absolute positioning
M82 ;set extruder to absolute mode
M107 ;start with the fan off
G28 X0 Y0 ;move X/Y to min endstops
G28 Z0 ;move Z to min endstops
M109 S{TEMP0} ;wait on temperature line
G29 ; Auto bed levelling
G92 E0 ;zero the extruded length
G1 F{TRAVEL_SPEED} ;
</pre>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/using-us-netflix-with-roku-and-openwrt.html">Using US netflix with roku and openwrt</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Posted: <time class="published" datetime="2014-08-29T21:30:19-06:00">2014-08-29 21:30</time></span>
                <br><span class="tags">Tags: 
                </span>
            </div>
        <div>
<h2>First method</h2>
<p>The Roku has no possibility to change the DNS to a specific one, so to use US Netflix with the roku the DNS has to be set in  the router.</p>
<p>I don’t like all my DNS traffic going to a DNS that I don’t trust so with options of dnsmasq that comes with openwrt I set DNS Forwarding.</p>
<p>Be careful to change x.x.x.x for the ip address of the DNS service you want to use.</p>
<p>example http://www.unblock-us.com ip 208.122.23.23</p>
<p>in the file /etc/config/dhcp add the following lines below config dnsmasq.</p>
<pre class="code literal-block"><span></span>    list server '/netflix.com/x.x.x.x'
    list server '/nflximg.net/x.x.x.x'
    list server '/nflximg.com/x.x.x.x'
    list server '/roku.com/x.x.x.x'
    list server '/mgo-images.com/x.x.x.x'
    list server '/netflix.net/x.x.x.x'
    list server '/netflix.net/x.x.x.x'
    list server '/roku.com/x.x.x.x'
    list server '/scorecardresearch.com/x.x.x.x'
</pre>


<p>it is necessary to add all that list servers.</p>
<p>This method could work for any other hardware but I have only tested it in the roku.</p>
<h2>Second method</h2>
<p>At first I was using the first method but I had to keep adding forwarder addresses to the dhcp file.</p>
<p>in “network-&gt;firewall-&gt;custom rules” add the following rules</p>
<pre class="code literal-block"><span></span>iptables -t nat -A PREROUTING -i br-lan -s x.x.x.x -p udp –dport 53 -j DNAT –to-destination y.y.y.y:53
#iptables -t nat -A POSTROUTING -j MASQUERADE
</pre>


<p>where <code>x.x.x.x</code> is the roku or other device you want to use with a specific dns server and <code>y.y.y.y</code> is the address of the specific dns server.</p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/instalando-repetierhost-en-ubuntu-1404.html">Instalando RepetierHost en Ubuntu 1404</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Posted: <time class="published" datetime="2014-05-07T10:23:32-06:00">2014-05-07 10:23</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/3dprint-printrbot.html"><span>3dprint printrbot</span></a>
                </span>
            </div>
        <div>
<h2>Instalar</h2>
<ol>
<li>Para utilizar la printrbot simple estoy utilizando RepetierHost, estos son algunos de los pasos que seguí para poder imprimir.</li>
<li>Descargar RepetierHost de http://www.repetier.com/download/</li>
<li>Descomprimir y mover la carpeta RepetierHost al lugar donde se desea.</li>
</ol>
<p>Ej: repetierHostLinux_0_95.tgz</p>
<pre class="code literal-block"><span></span>tar -xzf repetierHostLinux_0_95.tgz
mv RepetierHost $HOME
</pre>


<p>o donde se desea dejar, <code>cd RepetierHost</code> y luego ejecutar configureFirst.sh, lo cual les va a instalar las dependencias del sistema.</p>
<p><code>./configureFirst.sh</code></p>
<p>Si da errores al descargar ExtUtils-ParseXS-3.18_04.tar.gz o parecido</p>
<pre class="code literal-block"><span></span>Working on SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz
Fetching http://www.cpan.org/authors/id/S/SM/SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz ... FAIL
! Download http://www.cpan.org/authors/id/S/SM/SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz failed. Retrying ...
! Download http://www.cpan.org/authors/id/S/SM/SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz failed. Retrying ...
! Download http://www.cpan.org/authors/id/S/SM/SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz failed. Retrying ...
! Failed to download http://www.cpan.org/authors/id/S/SM/SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz
! Failed to fetch distribution ExtUtils-ParseXS-3.18_04
--&gt; Working on ./xs
</pre>


<p>es necesario actualizar la linea 127 en Slic3r/Build.PL
y cambiar</p>
<pre class="code literal-block"><span></span>system $cpanm, 'SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz';
</pre>


<p>por</p>
<pre class="code literal-block"><span></span>system $cpanm, 'SMUELLER/ExtUtils-ParseXS-3.24.tar.gz';
</pre>


<p>Luego ejecutar de nuevo configureFirst.sh como anteriormente.</p>
<p>van a ver unos errores en las pruebas pero el sistema va a funcionar bien.</p>
<p>Al abrir RepetierHost es necesario como primer paso configurar la impresora, para esto van a "Printer Settings" y utilizan la siguiente configuración</p>
<p>En la pestaña de connection</p>
<pre class="code literal-block"><span></span>port: /dev/ttyACM0
Baud Rate: 230400
Trasfer Protocol: Autodetect
Reset on Connect: Disabled
Reset on Emergency: Send emergency command and reconnect
En la pestaña Printer
</pre>


<p>Defautl Heated Bed Temperature: 0</p>
<p>En la pestaña Printer Shape</p>
<pre class="code literal-block"><span></span>X MAx 100
Y Max 100
Print Area Width: 100
Print Area Depth: 100
Print Area Height: 100
</pre>


<p>Cuando tenga mas recomendaciones las agrego, si alguien tiene alguna recomendación se lo agradecería para agregarla.</p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/optimizacion-de-apache2.html">Optimización de apache2</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Posted: <time class="published" datetime="2013-10-18T11:16:14-06:00">2013-10-18 11:16</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/apache.html"><span>apache</span></a>
                            <a class="tag" href="categories/keepalive.html"><span>keepalive</span></a>
                            <a class="tag" href="categories/optimizacion.html"><span>optimizacion</span></a>
                            <a class="tag" href="categories/web.html"><span>web</span></a>
                </span>
            </div>
        <div>
<p>Primero hay que revisar cuales módulos están cargados, esto se puede hacer con</p>
<pre class="code literal-block"><span></span>apachectl -M
</pre>


<p>Lo ideal es tener solo los módulos necesarios para que el sitio funcione, la cantidad de módulos influye en e tamaño de cada proceso de apache que se encuentra corriendo.</p>
<pre class="code literal-block"><span></span>HostnameLookups off
</pre>


<p>Cuando un cliente el accede el servidor web, se crea una bitácora en access.log, si esta directiva esta en On se busca el nombre en el servidor de nombres, aun con un cache de dns esto es muy lento.</p>
<p>Cuando se establece una conexión esta se deja escuchando por un tiempo por si se le hace una nueva petición, en el caso de tener muchos visitantes y dejar la conexiones abiertas por mucho tiempo, se crea un problema, por eso se puede bajar el tiempo para poder servir nuevas peticiones. (Esta altamente ligado al MaxClients).</p>
<pre class="code literal-block"><span></span>KeepAlive On
KeepAliveTimeout 2
</pre>


<p>Para el momento de calcular MaxClients.</p>
<p>Una buena referencia es MaxClients = (total de memoria)/(promedio de memoria utilizada por cada proceso de apache)</p>
<p>Una buena manera de ver el tamaño de un proceso de apache es con el comando <code>ps -ylC apache2 --sort:rss</code></p>
<p>Con esto se puede ver el tamaño del proceso mas grande de ultimo.</p>
<p>Una suma de la columna del rss nos da un valor del total de memoria que esta usando el proceso, esto puede aumentar porque no todos los procesos tiene el mismo tamaño.</p>
<pre class="code literal-block"><span></span>ps -ylC apache2 --sort:rss | awk '{SUM += $8 } END {print SUM}'
</pre>


<p>Hay que tomar en cuenta también el resto de procesos del servidor.</p>
<p>Utilizando top y acomodando por rss podemos ver los procesos que están utilizando mas memoria, entre estos deberíamos encontrar los procesos de apache y el o los de la base de datos si es que se tiene una.</p>
</div>
            

        </div>
    
        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-1.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <div id="sidebar">
            <!--Sidebar content-->
            <h1 id="blog-title">
                <a href="http://rngkll.github.io/" title="Mi Sitio">Mi Sitio</a>
            </h1>
            
            <small>
                Also available in: 
                
            <li><a href="http://rngkll.github.io/" rel="alternate" hreflang="es">Español</a></li>

            </small>
            
            <ul class="unstyled">
<li>
            
                <li>
<a href="../archive.html">Archivo</a>
                </li>
<li>
<a href="../categories/index.html">Etiquetas</a>
                </li>
<li>
<a href="../rss.xml">Canal RSS</a>

            </li>
<li>
            
            
            </ul>
</div>
        <div id="footer">
            Contents © 2017         <a href="mailto:alvarosb@gmail.com">Alvaro Segura Del Barco</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </div>
    </div>
    
            <script src="../assets/js/all-nocdn.js"></script><script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>
</body>
</html>
