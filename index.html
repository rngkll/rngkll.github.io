<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="es">
<head>
<meta charset="utf-8">
<meta name="description" content="Varas ahí">
<meta name="viewport" content="width=device-width">
<title>Mi Sitio | Mi Sitio</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (es)" href="rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="en/rss.xml">
<link rel="canonical" href="http://rngkll.github.io/index.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body class="home blog">
    <div id="wrap" style="width:850px">
        <div id="container" style="width:560px">
            
            
        <div class="postbox">
        <h1><a href="posts/configurar-switch-hp.html">Configurar un switch HP</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Publicado: <time class="published" datetime="2016-11-03T09:00:00-06:00">2016-11-03 09:00</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/cisco.html"><span>cisco</span></a>
                            <a class="tag" href="categories/networking.html"><span>networking</span></a>
                </span>
            </div>
        <div>
<h2>Instalación</h2>
<p>La forma mas simple de instalar Nikola es con pip y virtual, también se podría utilizar uno de los paquetes de la distribución que se este utilizando, en si son usuarios de Linux.</p>
<p>En el directorio del repositorio del sitio</p>
<pre class="code literal-block"><span></span>virtualenv --python=python3 .env
source .env/bin/activate
pip3 install --upgrade "Nikola[extras]"
</pre>


<h3>Primeros usos</h3>
<p>En este momento se tiene el sistema instalado, ahora hay que crear el contenido del primer sitio de prueba, estando en el directorio que va a mantener el código, se ejecuta el comando <code>nikola init --demo .</code>, luego se debe de construir el sitio con el comando <code>nikola build</code>.</p>
<p>El siguiente paso es ver el sitio, para lo que va a utilizar el comando <code>nikola serve -b</code>, pero es mucho mas fácil utilizar <code>nikola auto -b</code> para reconstrucciones automáticas.</p>
<h2>Utilizar markdown</h2>
<p>Para utilizar markdown para crear los post se debe usar uno de los múltiples lenguajes de marcado ligero soportado, para eso se debe de editar el archivo config.py en la raíz del sitio en Nikola.</p>
<p>Primero se debe de verificar que este en la estructura <strong>COMPILERS</strong></p>
<pre class="code literal-block"><span></span># 'rest' is reStructuredText
# 'markdown' is MarkDown
# 'html' assumes the file is HTML and just copies it
COMPILERS = {
    "rest": ('.rst', '.txt'),
    "markdown": ('.md', '.mdown', '.markdown'),
    "textile": ('.textile',),
    "txt2tags": ('.t2t',),
    "bbcode": ('.bb',),
    #"wiki": ('.wiki',),
    "ipynb": ('.ipynb',),
    "html": ('.html', '.htm'),
    # PHP files are rendered the usual way (i.e. with the full templates).
    # The resulting files have .php extensions, making it possible to run
    # them without reconfiguring your server to recognize them.
    "php": ('.php',),
    # Pandoc detects the input from the source filename
    # but is disabled by default as it would conflict
    # with many of the others.
    # "pandoc": ('.rst', '.md', '.txt'),
}
</pre>


<p>Luego se debe de agregar a la estructura del tipo de entrada, en el ejemplo de abajo se agregó la linea, <code>("posts/*.md", "posts", "post.tmpl")</code> a los dos tipos de entras <strong>POST</strong> y <strong>PAGES</strong>.</p>
<pre class="code literal-block"><span></span><span class="n">POSTS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s2">"posts/*.rst"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"posts/*.txt"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"posts/*.md"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">PAGES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s2">"stories/*.rst"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.txt"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.md"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
<span class="p">)</span>
</pre>


<h2>Utilizar locales para Costa Rica</h2>
<p>Este proceso debería funcionar para la mayoría de idiomas.</p>
<ol>
<li>Generar el locale necesario con `locale-get <locale></locale>
</li>
<li>Definir cual es el locale que debe de utilizar Nikola por defecto.</li>
</ol>
<pre class="code literal-block"><span></span><span class="c1"># What is the default language?</span>
<span class="n">DEFAULT_LANG</span> <span class="o">=</span> <span class="s2">"es"</span>

<span class="c1"># What other languages do you have?</span>
<span class="c1"># The format is {"translationcode" : "path/to/translation" }</span>
<span class="c1"># the path will be used as a prefix for the generated pages location</span>
<span class="n">TRANSLATIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">DEFAULT_LANG</span><span class="p">:</span> <span class="s2">"es_CR"</span><span class="p">,</span>
    <span class="c1"># Example for another language:</span>
    <span class="c1"># "es": "./es",</span>
    <span class="s2">"es"</span><span class="p">:</span> <span class="s2">"./"</span><span class="p">,</span>
    <span class="s2">"en"</span><span class="p">:</span> <span class="s2">"./en"</span><span class="p">,</span>
<span class="p">}</span>
</pre>


<ol>
<li>Definir el locale que se va a utilizar para <code>es</code>, por defecto es <code>es_ES</code>.</li>
</ol>
<pre class="code literal-block"><span></span><span class="n">LOCALES</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"es"</span><span class="p">:</span><span class="s2">"es_CR.utf-8"</span><span class="p">,</span>
        <span class="p">}</span>
</pre>


<p>El locale a utilizar puede ser probado, importando locale <code>import locale</code> y llamando al locale necesario <code>locale.setlocale(locale.LC_ALL, 'es_CR.utf-8')</code></p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/el-mejor-jerk-chicken.html">Jerk chicken natural</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Publicado: <time class="published" datetime="2016-01-01T00:00:00-06:00">2016-01-01 00:00</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/allspice.html"><span>allspice</span></a>
                            <a class="tag" href="categories/comida.html"><span>comida</span></a>
                            <a class="tag" href="categories/jerk.html"><span>jerk</span></a>
                </span>
            </div>
        <div>
<h2>La idea</h2>
<p>Hace unos días estábamos de vacaciones en pavones y Coco(administradora de la casa rentada) nos llevo unas hojas de Allspice, de una se me ocurrió que podíamos hacer Jerk Chicken, resulta que la hoja tiene muy buen sabor pero no se conserva bien, por lo que no se vende comercialmente.</p>
<h2>Ingredientes</h2>
<ul>
<li>Hojas de <a href="https://en.wikipedia.org/wiki/Allspice">allspice</a>
</li>
<li><a href="https://en.wikipedia.org/wiki/Ginger">Jengibre</a></li>
<li>Salsa de soya</li>
<li>Cebolla</li>
<li>Ajo</li>
<li>Chile panameño o algun otro</li>
<li>Azucar</li>
<li>Sal</li>
<li>Aceite</li>
<li>Jugo de limón</li>
</ul>
<h2>Preparación</h2>
<p>Las proporciones dependen de la cantidad y que tan fuerte se quiera, no me gusta hacerlo con medida pero voy a escribir unas instrucciones de mas o menos como lo hice.</p>
<p>En una licuadora agregué(cantidades aproximadas):</p>
<ol>
<li>Allspice, 6 hojas.</li>
<li>Como 2 centimetros cubicos de jengibre.</li>
<li>Una botella de salsa de soya, aprox 100ml.</li>
<li>Unas 2 cebollas medianas.</li>
<li>media cabeza de ajo.</li>
<li>Un chile</li>
<li>Mas o menos, 5 cucharadas de azucar.</li>
<li>Al gusto, creo que fueron 2 cucharaditas de sal.</li>
<li>Aceite aproximadamente 150ml.</li>
<li>El jugo de 4 limones. </li>
</ol>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/utilizar-nikola.html">Utilizar Nikola por primera vez</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Publicado: <time class="published" datetime="2015-08-20T23:00:00-06:00">2015-08-20 23:00</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/blog.html"><span>blog</span></a>
                            <a class="tag" href="categories/jaquerespeis.html"><span>jaquerespeis</span></a>
                            <a class="tag" href="categories/markdown.html"><span>markdown</span></a>
                            <a class="tag" href="categories/nikola.html"><span>nikola</span></a>
                            <a class="tag" href="categories/python.html"><span>python</span></a>
                </span>
            </div>
        <div>
<h2>Instalación</h2>
<p>La forma mas simple de instalar Nikola es con pip y virtual, también se podría utilizar uno de los paquetes de la distribución que se este utilizando, en si son usuarios de Linux.</p>
<p>En el directorio del repositorio del sitio</p>
<pre class="code literal-block"><span></span>virtualenv --python=python3 .env
source .env/bin/activate
pip3 install --upgrade "Nikola[extras]"
</pre>


<h3>Primeros usos</h3>
<p>En este momento se tiene el sistema instalado, ahora hay que crear el contenido del primer sitio de prueba, estando en el directorio que va a mantener el código, se ejecuta el comando <code>nikola init --demo .</code>, luego se debe de construir el sitio con el comando <code>nikola build</code>.</p>
<p>El siguiente paso es ver el sitio, para lo que va a utilizar el comando <code>nikola serve -b</code>, pero es mucho mas fácil utilizar <code>nikola auto -b</code> para reconstrucciones automáticas.</p>
<h2>Utilizar markdown</h2>
<p>Para utilizar markdown para crear los post se debe usar uno de los múltiples lenguajes de marcado ligero soportado, para eso se debe de editar el archivo config.py en la raíz del sitio en Nikola.</p>
<p>Primero se debe de verificar que este en la estructura <strong>COMPILERS</strong></p>
<pre class="code literal-block"><span></span># 'rest' is reStructuredText
# 'markdown' is MarkDown
# 'html' assumes the file is HTML and just copies it
COMPILERS = {
    "rest": ('.rst', '.txt'),
    "markdown": ('.md', '.mdown', '.markdown'),
    "textile": ('.textile',),
    "txt2tags": ('.t2t',),
    "bbcode": ('.bb',),
    #"wiki": ('.wiki',),
    "ipynb": ('.ipynb',),
    "html": ('.html', '.htm'),
    # PHP files are rendered the usual way (i.e. with the full templates).
    # The resulting files have .php extensions, making it possible to run
    # them without reconfiguring your server to recognize them.
    "php": ('.php',),
    # Pandoc detects the input from the source filename
    # but is disabled by default as it would conflict
    # with many of the others.
    # "pandoc": ('.rst', '.md', '.txt'),
}
</pre>


<p>Luego se debe de agregar a la estructura del tipo de entrada, en el ejemplo de abajo se agregó la linea, <code>("posts/*.md", "posts", "post.tmpl")</code> a los dos tipos de entras <strong>POST</strong> y <strong>PAGES</strong>.</p>
<pre class="code literal-block"><span></span><span class="n">POSTS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s2">"posts/*.rst"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"posts/*.txt"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"posts/*.md"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">PAGES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s2">"stories/*.rst"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.txt"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.md"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
<span class="p">)</span>
</pre>


<h2>Utilizar locales para Costa Rica</h2>
<p>Este proceso debería funcionar para la mayoría de idiomas.</p>
<ol>
<li>Generar el locale necesario con `locale-get <locale></locale>
</li>
<li>Definir cual es el locale que debe de utilizar Nikola por defecto.</li>
</ol>
<pre class="code literal-block"><span></span><span class="c1"># What is the default language?</span>
<span class="n">DEFAULT_LANG</span> <span class="o">=</span> <span class="s2">"es"</span>

<span class="c1"># What other languages do you have?</span>
<span class="c1"># The format is {"translationcode" : "path/to/translation" }</span>
<span class="c1"># the path will be used as a prefix for the generated pages location</span>
<span class="n">TRANSLATIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">DEFAULT_LANG</span><span class="p">:</span> <span class="s2">"es_CR"</span><span class="p">,</span>
    <span class="c1"># Example for another language:</span>
    <span class="c1"># "es": "./es",</span>
    <span class="s2">"es"</span><span class="p">:</span> <span class="s2">"./"</span><span class="p">,</span>
    <span class="s2">"en"</span><span class="p">:</span> <span class="s2">"./en"</span><span class="p">,</span>
<span class="p">}</span>
</pre>


<ol>
<li>Definir el locale que se va a utilizar para <code>es</code>, por defecto es <code>es_ES</code>.</li>
</ol>
<pre class="code literal-block"><span></span><span class="n">LOCALES</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"es"</span><span class="p">:</span><span class="s2">"es_CR.utf-8"</span><span class="p">,</span>
        <span class="p">}</span>
</pre>


<p>El locale a utilizar puede ser probado, importando locale <code>import locale</code> y llamando al locale necesario <code>locale.setlocale(locale.LC_ALL, 'es_CR.utf-8')</code></p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/configuracion-para-la-printrbot-simple.html">Configuración para la printrbot simple</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Publicado: <time class="published" datetime="2015-08-14T21:39:41-06:00">2015-08-14 21:39</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/3dprint.html"><span>3dprint</span></a>
                            <a class="tag" href="categories/printrbot.html"><span>printrbot</span></a>
                </span>
            </div>
        <div>
<h3>Código:</h3>
<pre class="code literal-block"><span></span>M104 S{TEMP0} ; set temperature
G21 ;metric values
G90 ;absolute positioning
M82 ;set extruder to absolute mode
M107 ;start with the fan off
G28 X0 Y0 ;move X/Y to min endstops
G28 Z0 ;move Z to min endstops
M109 S{TEMP0} ;wait on temperature line
G29 ; Auto bed levelling
G92 E0 ;zero the extruded length
G1 F{TRAVEL_SPEED} ;
</pre>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/using-us-netflix-with-roku-and-openwrt.html">Using US netflix with roku and openwrt</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Publicado: <time class="published" datetime="2014-08-29T21:30:19-06:00">2014-08-29 21:30</time></span>
                <br><span class="tags">Tags: 
                </span>
            </div>
        <div>
<h2>First method</h2>
<p>The Roku has no possibility to change the DNS to a specific one, so to use US Netflix with the roku the DNS has to be set in  the router.</p>
<p>I don’t like all my DNS traffic going to a DNS that I don’t trust so with options of dnsmasq that comes with openwrt I set DNS Forwarding.</p>
<p>Be careful to change x.x.x.x for the ip address of the DNS service you want to use.</p>
<p>example http://www.unblock-us.com ip 208.122.23.23</p>
<p>in the file /etc/config/dhcp add the following lines below config dnsmasq.</p>
<pre class="code literal-block"><span></span>    list server '/netflix.com/x.x.x.x'
    list server '/nflximg.net/x.x.x.x'
    list server '/nflximg.com/x.x.x.x'
    list server '/roku.com/x.x.x.x'
    list server '/mgo-images.com/x.x.x.x'
    list server '/netflix.net/x.x.x.x'
    list server '/netflix.net/x.x.x.x'
    list server '/roku.com/x.x.x.x'
    list server '/scorecardresearch.com/x.x.x.x'
</pre>


<p>it is necessary to add all that list servers.</p>
<p>This method could work for any other hardware but I have only tested it in the roku.</p>
<h2>Second method</h2>
<p>At first I was using the first method but I had to keep adding forwarder addresses to the dhcp file.</p>
<p>in “network-&gt;firewall-&gt;custom rules” add the following rules</p>
<pre class="code literal-block"><span></span>iptables -t nat -A PREROUTING -i br-lan -s x.x.x.x -p udp –dport 53 -j DNAT –to-destination y.y.y.y:53
#iptables -t nat -A POSTROUTING -j MASQUERADE
</pre>


<p>where <code>x.x.x.x</code> is the roku or other device you want to use with a specific dns server and <code>y.y.y.y</code> is the address of the specific dns server.</p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/instalando-repetierhost-en-ubuntu-1404.html">Instalando RepetierHost en Ubuntu 1404</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Publicado: <time class="published" datetime="2014-05-07T10:23:32-06:00">2014-05-07 10:23</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/3dprint-printrbot.html"><span>3dprint printrbot</span></a>
                </span>
            </div>
        <div>
<h2>Instalar</h2>
<ol>
<li>Para utilizar la printrbot simple estoy utilizando RepetierHost, estos son algunos de los pasos que seguí para poder imprimir.</li>
<li>Descargar RepetierHost de http://www.repetier.com/download/</li>
<li>Descomprimir y mover la carpeta RepetierHost al lugar donde se desea.</li>
</ol>
<p>Ej: repetierHostLinux_0_95.tgz</p>
<pre class="code literal-block"><span></span>tar -xzf repetierHostLinux_0_95.tgz
mv RepetierHost $HOME
</pre>


<p>o donde se desea dejar, <code>cd RepetierHost</code> y luego ejecutar configureFirst.sh, lo cual les va a instalar las dependencias del sistema.</p>
<p><code>./configureFirst.sh</code></p>
<p>Si da errores al descargar ExtUtils-ParseXS-3.18_04.tar.gz o parecido</p>
<pre class="code literal-block"><span></span>Working on SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz
Fetching http://www.cpan.org/authors/id/S/SM/SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz ... FAIL
! Download http://www.cpan.org/authors/id/S/SM/SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz failed. Retrying ...
! Download http://www.cpan.org/authors/id/S/SM/SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz failed. Retrying ...
! Download http://www.cpan.org/authors/id/S/SM/SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz failed. Retrying ...
! Failed to download http://www.cpan.org/authors/id/S/SM/SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz
! Failed to fetch distribution ExtUtils-ParseXS-3.18_04
--&gt; Working on ./xs
</pre>


<p>es necesario actualizar la linea 127 en Slic3r/Build.PL
y cambiar</p>
<pre class="code literal-block"><span></span>system $cpanm, 'SMUELLER/ExtUtils-ParseXS-3.18_04.tar.gz';
</pre>


<p>por</p>
<pre class="code literal-block"><span></span>system $cpanm, 'SMUELLER/ExtUtils-ParseXS-3.24.tar.gz';
</pre>


<p>Luego ejecutar de nuevo configureFirst.sh como anteriormente.</p>
<p>van a ver unos errores en las pruebas pero el sistema va a funcionar bien.</p>
<p>Al abrir RepetierHost es necesario como primer paso configurar la impresora, para esto van a "Printer Settings" y utilizan la siguiente configuración</p>
<p>En la pestaña de connection</p>
<pre class="code literal-block"><span></span>port: /dev/ttyACM0
Baud Rate: 230400
Trasfer Protocol: Autodetect
Reset on Connect: Disabled
Reset on Emergency: Send emergency command and reconnect
En la pestaña Printer
</pre>


<p>Defautl Heated Bed Temperature: 0</p>
<p>En la pestaña Printer Shape</p>
<pre class="code literal-block"><span></span>X MAx 100
Y Max 100
Print Area Width: 100
Print Area Depth: 100
Print Area Height: 100
</pre>


<p>Cuando tenga mas recomendaciones las agrego, si alguien tiene alguna recomendación se lo agradecería para agregarla.</p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/optimizacion-de-apache2.html">Optimización de apache2</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Publicado: <time class="published" datetime="2013-10-18T11:16:14-06:00">2013-10-18 11:16</time></span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/apache.html"><span>apache</span></a>
                            <a class="tag" href="categories/keepalive.html"><span>keepalive</span></a>
                            <a class="tag" href="categories/optimizacion.html"><span>optimizacion</span></a>
                            <a class="tag" href="categories/web.html"><span>web</span></a>
                </span>
            </div>
        <div>
<p>Primero hay que revisar cuales módulos están cargados, esto se puede hacer con</p>
<pre class="code literal-block"><span></span>apachectl -M
</pre>


<p>Lo ideal es tener solo los módulos necesarios para que el sitio funcione, la cantidad de módulos influye en e tamaño de cada proceso de apache que se encuentra corriendo.</p>
<pre class="code literal-block"><span></span>HostnameLookups off
</pre>


<p>Cuando un cliente el accede el servidor web, se crea una bitácora en access.log, si esta directiva esta en On se busca el nombre en el servidor de nombres, aun con un cache de dns esto es muy lento.</p>
<p>Cuando se establece una conexión esta se deja escuchando por un tiempo por si se le hace una nueva petición, en el caso de tener muchos visitantes y dejar la conexiones abiertas por mucho tiempo, se crea un problema, por eso se puede bajar el tiempo para poder servir nuevas peticiones. (Esta altamente ligado al MaxClients).</p>
<pre class="code literal-block"><span></span>KeepAlive On
KeepAliveTimeout 2
</pre>


<p>Para el momento de calcular MaxClients.</p>
<p>Una buena referencia es MaxClients = (total de memoria)/(promedio de memoria utilizada por cada proceso de apache)</p>
<p>Una buena manera de ver el tamaño de un proceso de apache es con el comando <code>ps -ylC apache2 --sort:rss</code></p>
<p>Con esto se puede ver el tamaño del proceso mas grande de ultimo.</p>
<p>Una suma de la columna del rss nos da un valor del total de memoria que esta usando el proceso, esto puede aumentar porque no todos los procesos tiene el mismo tamaño.</p>
<pre class="code literal-block"><span></span>ps -ylC apache2 --sort:rss | awk '{SUM += $8 } END {print SUM}'
</pre>


<p>Hay que tomar en cuenta también el resto de procesos del servidor.</p>
<p>Utilizando top y acomodando por rss podemos ver los procesos que están utilizando mas memoria, entre estos deberíamos encontrar los procesos de apache y el o los de la base de datos si es que se tiene una.</p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/freeswitch-in-raspberry-pi.html">Freeswitch in Raspberry Pi</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Publicado: <time class="published" datetime="2013-07-09T10:23:32-06:00">2013-07-09 10:23</time></span>
                <br><span class="tags">Tags: 
                </span>
            </div>
        <div>
<h2>Experiments using raspberry pi</h2>
<p>I bought the raspberry pi to use it as a print and scanner server in my house, now I have some more ideas, one is using freeswitch to test voip performance in the rpi.</p>
<p>installing Freeswitch in the rpi.</p>
<p>Pi uses the default Debian image so we need to install Debian dependencies.</p>
<pre class="code literal-block"><span></span>apt-get install autoconf automake gawk g++ git-core libjpeg62-dev libncurses5-dev libtool make python-dev gawk pkg-config libtiff4-dev libperl-dev libgdbm-dev libdb-dev
</pre>


<p>Change to /usr/local/src and download Freeswitch using git</p>
<pre class="code literal-block"><span></span>git clone -b v1.2.stable git://git.freeswitch.org/freeswitch.git
git clone git://git.freeswitch.org/freeswitch-contrib.git
git clone git://git.freeswitch.org/freeswitch-sample-configs.git
</pre>


<p>Raspberry Pi has limited resources so I will compile Freeswitch to get a better performance.</p>
<h3>Compiling steps</h3>
<pre class="code literal-block"><span></span>./bootstrap.sh ./configure -C
</pre>


<p>I had some problems when mod_flite enabled, I have a 256mb rpi.</p>
<p>make &amp;&amp; make install Now Freeswitch is installed. freeswitch initscript for debian can be found here</p>
<h2>Resources</h2>
<p>http://wiki.freeswitch.org/wiki/Installation_Guide</p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/openwrt-en-ubiquiti-power-ap-n-%2B-multiwan.html">OpenWRT en Ubiquiti Power AP N + Multiwan</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Publicado: <time class="published" datetime="2013-04-01T11:19:38-06:00">2013-04-01 11:19</time></span>
                <br><span class="tags">Tags: 
                </span>
            </div>
        <div>
<h2>Instalación de openwrt</h2>
<h3>Descargar la imagen</h3>
<p>Como en openwrt.org no existe una imagen hecha específicamente para ese router es necesario utilizar la del Ubiquiti Nanostation M</p>
<p>http://backfire.openwrt.org/10.03.1/ar71xx/openwrt-ar71xx-ubnt-nano-m-jffs2-factory.bin
Cargar por TFTP</p>
<h3>Requerimientos</h3>
<ul>
<li>Cable ethernet entre la computadora y el router</li>
<li>Configuración de la tarjeta de red: 192.168.1.254/255.255.255.0</li>
<li>Cliente tftp</li>
<li>El firmware que se va a cargar</li>
</ul>
<h3>Procedimiento</h3>
<ul>
<li>Apagar el dispositivo</li>
<li>Apertar el botón de reset</li>
<li>Encender el dispositivo</li>
<li>Liberar el botón cerca de 10 segundos de encender el dispositivo. Los leds empiezan a cambiar.</li>
<li>hacer ping 192.168.1.20, si funciona estamos listos para cargar la imagen.</li>
<li>Cargar la imagen por tftp como flash_update (Me parece que en las versiones mas nuevas no es necesario)</li>
</ul>
<pre class="code literal-block"><span></span>tftp 192.168.1.20
tftp&gt; bin
tftp&gt; put imagen.bin flash_update
Sent 1965199 bytes in 28.8 seconds
tftp&gt; quit
</pre>


<p>En el momento que el equipo reinicia solo va a contestar por el puerto de la WAN, ingresamos a http://192.168.1.1 y cambiamos la contraseña.</p>
<h3>Configuración</h3>
<p>Por ssh vamos a editar las interfaces de red en /etc/config/network y sustituimos por lo siguiente.</p>
<pre class="code literal-block"><span></span>config 'switch' 'eth1'
        option 'enable_vlan' '1'

config 'switch_vlan'
        option 'device' 'eth1'
        option 'vlan' '1'
        option 'ports' '0 1 2 3 4'

config 'interface' 'loopback'
        option 'ifname' 'lo'
        option 'proto' 'static'
        option 'ipaddr' '127.0.0.1'
        option 'netmask' '255.0.0.0'

config 'interface' 'lan'
        option 'ifname' 'eth1'
        option 'type' 'bridge'
        option 'proto' 'static'
        option 'ipaddr' '192.168.1.1'
        option 'netmask' '255.255.255.0'
        option '_orig_ifname' 'eth1'
        option '_orig_bridge' 'true'

config 'interface' 'wan'
        option 'ifname' 'eth0'
        option '_orig_ifname' 'eth0'
        option '_orig_bridge' 'false'
        option 'proto' 'dhcp'
</pre>


<p>Con esto ya tenemos un router inalámbrico en su configuración normal, de aquí en adelante es jugar con el OpenWRT para poder hacer lo que uno quiera.</p>
<h2>Multiwan</h2>
<p>Es necesario instalar los siguientes paquetes:</p>
<pre class="code literal-block"><span></span>luci-app-multiwan
multiwan
</pre>


<p>Para utilizar se tiene que configurar el switch que concentra los 4 puertos para separar uno para utilizarlo como una segunda wan.</p>
<pre class="code literal-block"><span></span>config 'interface' 'loopback'
    option 'ifname' 'lo'
    option 'proto' 'static'
    option 'ipaddr' '127.0.0.1'
    option 'netmask' '255.0.0.0'

config 'switch' 'eth1'
    option 'enable_vlan' '1'

config 'switch_vlan'
    option 'device' 'eth1'
    option 'vlan' '1'
    option 'vid' '1'
    option 'ports' '0t 1 2 3'

config 'switch_vlan'
    option 'device' 'eth1'
    option 'vlan' '2'
    option 'vid' '2'
    option 'ports' '0t 4'

config 'interface' 'lan'
    option 'ifname' 'eth1.1'
    option 'type' 'bridge'
    option '_orig_ifname' 'eth1'
    option '_orig_bridge' 'true'
    option 'proto' 'static'
    option 'ipaddr' '172.16.1.1'
    option 'netmask' '255.255.255.0'

config 'interface' 'wan'
    option 'ifname' 'eth0'
    option '_orig_ifname' 'eth0'
    option '_orig_bridge' 'false'
    option 'proto' 'dhcp'
    option 'broadcast' '1'

config 'interface' 'wan2'
    option 'ifname' 'eth1.2'
    option '_orig_ifname' 'eth1.2'
    option '_orig_bridge' 'false'
    option 'proto' 'static'
    option 'ipaddr' '192.168.1.3'
    option 'netmask' '255.255.255.0'
    option 'gateway' '192.168.1.1'
    option 'broadcast' '192.168.1.255'
    option 'dns' '200.91.75.5 200.91.75.6'
</pre>


<p>Despues de esto nada mas hay que agregar la nueva interfaz creada a la zona del wan del firewall, esto se puede hacer de manera gráfica.</p>
<p>A causa de un pico de voltaje durante una tormenta eléctrica no se va experimentar mas con este router.</p>
</div>
            

        </div>
        <div class="postbox">
        <h1><a href="posts/usuarios-sftp-sin-ssh.html">Usuarios sftp sin ssh</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">
                <span class="authordate">
                    Publicado: <time class="published" datetime="2013-03-15T15:34:28-06:00">2013-03-15 15:34</time></span>
                <br><span class="tags">Tags: 
                </span>
            </div>
        <div>
<p>Para evitar que los usuario puedan acceder por medio de ssh pero si tengan acceso sftp al servidor.</p>
<h3>Cambiar el shell del usuario al sftp-server</h3>
<h4>Centos 5.7</h4>
<pre class="code literal-block"><span></span>usermod -s  /usr/libexec/openssh/sftp-server username
</pre>


<h4>Debian 6.0</h4>
<pre class="code literal-block"><span></span>usermod -s /usr/lib/sftp-server username
</pre>


<h3>Agregar al archivo /etc/shells</h3>
<h4>Centos 5.7</h4>
<pre class="code literal-block"><span></span>/usr/libexec/openssh/sftp-server
</pre>


<h4>Debian 6.0</h4>
<pre class="code literal-block"><span></span>/usr/lib/sftp-server
</pre>
</div>
            

        </div>
    

    

	


        </div>
        <div id="sidebar">
            <!--Sidebar content-->
            <h1 id="blog-title">
                <a href="http://rngkll.github.io/" title="Mi Sitio">Mi Sitio</a>
            </h1>
            
            <small>
                También disponible en: 
                
            <li><a href="http://rngkll.github.io/en/" rel="alternate" hreflang="en">English</a></li>

            </small>
            
            <ul class="unstyled">
<li>
            
                <li>
<a href="archive.html">Archivo</a>
                </li>
<li>
<a href="categories/index.html">Etiquetas</a>
                </li>
<li>
<a href="rss.xml">Canal RSS</a>

            </li>
<li>
            
            
            </ul>
</div>
        <div id="footer">
            Contents © 2017         <a href="mailto:alvarosb@gmail.com">Alvaro Segura Del Barco</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </div>
    </div>
    
            <script src="assets/js/all-nocdn.js"></script><script src="assets/js/colorbox-i18n/jquery.colorbox-es.js"></script><script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>
</body>
</html>
